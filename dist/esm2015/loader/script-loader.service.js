import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';
import { Injectable } from '@angular/core';
import { Observable, of } from 'rxjs';
import { switchMap } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
/**
 * ScriptLoaderService inserts a script tag into the document containing a script from the specified source.
 */
export class ScriptLoaderService {
    constructor(http) {
        this.http = http;
        this.scripts = {};
    }
    load(id, src) {
        if (this.scripts[id]) {
            return of(({ script: id, loaded: true, status: 'Already Loaded' }));
        }
        let script = this.initializeScript(id);
        script.src = src;
        return this.loadAndAppendScript(id, script);
    }
    loadWithAuth(id, src) {
        if (this.scripts[id]) {
            return of(({ script: id, loaded: true, status: 'Already Loaded' }));
        }
        let script = this.initializeScript(id);
        return this.getText(src, new HttpHeaders(), new HttpParams()).pipe(switchMap(text => {
            script.innerText = text;
            return this.loadAndAppendScript(id, script);
        }));
    }
    unloadScript(id) {
        var _a;
        (_a = document.getElementById("script_" + id)) === null || _a === void 0 ? void 0 : _a.remove();
        delete this.scripts[id];
    }
    initializeScript(id) {
        let script = document.getElementById("script_" + id); // Don't proliferate script tags on revisits
        if (!script) {
            script = document.createElement('script');
        }
        script.id = "script_" + id;
        script.type = 'text/javascript';
        return script;
    }
    loadAndAppendScript(id, script) {
        return new Observable(subscriber => {
            if (script.src) { // If the script has a URL src, complete the observable when it is loaded; otherwise, assume the source is included as bodycontent and complete immediately
                if (script.readyState) { // IE
                    script.onreadystatechange = () => {
                        if (script.readyState === "loaded" || script.readyState === "complete") {
                            script.onreadystatechange = null;
                            this.scripts[id] = true;
                            subscriber.next({ script: id, loaded: true, status: 'Loaded' });
                            subscriber.complete();
                        }
                    };
                }
                else { // Others
                    script.onload = () => {
                        this.scripts[id] = true;
                        subscriber.next({ script: id, loaded: true, status: 'Loaded' });
                        subscriber.complete();
                    };
                }
                script.onerror = err => subscriber.error({ script: id, loaded: false, status: 'Loaded', error: err });
                document.getElementsByTagName('head')[0].appendChild(script);
            }
            else {
                this.scripts[id] = true;
                subscriber.next({ script: id, loaded: true, status: 'Loaded' });
                subscriber.complete();
            }
        });
    }
    getText(url, headers, params) {
        return this.http.get(url, {
            headers: headers,
            observe: 'body',
            responseType: 'text',
            params: params,
        });
    }
}
/** @nocollapse */ ScriptLoaderService.ɵprov = i0.ɵɵdefineInjectable({ factory: function ScriptLoaderService_Factory() { return new ScriptLoaderService(i0.ɵɵinject(i1.HttpClient)); }, token: ScriptLoaderService, providedIn: "root" });
ScriptLoaderService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
/** @nocollapse */
ScriptLoaderService.ctorParameters = () => [
    { type: HttpClient }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyaXB0LWxvYWRlci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vcHJvamVjdHMvbGlicmFyeS9zcmMvbG9hZGVyL3NjcmlwdC1sb2FkZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUMzRSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3RDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7O0FBTTNDOztHQUVHO0FBSUgsTUFBTSxPQUFPLG1CQUFtQjtJQUU1QixZQUFvQixJQUFnQjtRQUFoQixTQUFJLEdBQUosSUFBSSxDQUFZO1FBRTVCLFlBQU8sR0FBOEIsRUFBRSxDQUFDO0lBRlQsQ0FBQztJQUlqQyxJQUFJLENBQUMsRUFBVSxFQUFFLEdBQVc7UUFFL0IsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFO1lBQ2xCLE9BQU8sRUFBRSxDQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ3ZFO1FBRUQsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3ZDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBRWpCLE9BQU8sSUFBSSxDQUFDLG1CQUFtQixDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUNoRCxDQUFDO0lBRU0sWUFBWSxDQUFDLEVBQVUsRUFBRSxHQUFXO1FBRXZDLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMs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RyxFQUFFLENBQUMsQ0FBQztnQkFDdEcsUUFBUSxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUNoRTtpQkFBTTtnQkFDSCxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQztnQkFDeEIsVUFBVSxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQztnQkFDaEUsVUFBVSxDQUFDLFFBQVEsRUFBRSxDQUFDO2FBQ3pCO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU0sT0FBTyxDQUFDLEdBQVcsRUFBRSxPQUFvQixFQUFFLE1BQWtCO1FBRWhFLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFO1lBQ2xCLE9BQU8sRUFBRSxPQUFPO1lBQ2hCLE9BQU8sRUFBRSxNQUFNO1lBQ2YsWUFBWSxFQUFFLE1BQU07WUFDcEIsTUFBTSxFQUFFLE1BQU07U0FDakIsQ0FBQyxDQUFDO0lBQ1gsQ0FBQzs7OztZQWhHSixVQUFVLFNBQUM7Z0JBQ1IsVUFBVSxFQUFFLE1BQU07YUFDckI7Ozs7WUFkUSxVQUFVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgc3dpdGNoTWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5kZWNsYXJlIGxldCBkb2N1bWVudDogRG9jdW1lbnQ7XG5cbmV4cG9ydCB0eXBlIFNjcmlwdExvYWRlclJlc3BvbnNlID0geyBzY3JpcHQ6IHN0cmluZywgbG9hZGVkOiBib29sZWFuLCBzdGF0dXM6IHN0cmluZywgZXJyb3I/OiBzdHJpbmcgfCBFdmVudCB9O1xuXG4vKipcbiAqIFNjcmlwdExvYWRlclNlcnZpY2UgaW5zZXJ0cyBhIHNjcmlwdCB0YWcgaW50byB0aGUgZG9jdW1lbnQgY29udGFpbmluZyBhIHNjcmlwdCBmcm9tIHRoZSBzcGVjaWZpZWQgc291cmNlLlxuICovXG5ASW5qZWN0YWJsZSh7XG4gICAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIFNjcmlwdExvYWRlclNlcnZpY2Uge1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50KSB7fVxuXG4gICAgcHJpdmF0ZSBzY3JpcHRzOiB7IFtpZDogc3RyaW5nXTogYm9vbGVhbiB9ID0ge307XG5cbiAgICBwdWJsaWMgbG9hZChpZDogc3RyaW5nLCBzcmM6IHN0cmluZyk6IE9ic2VydmFibGU8U2NyaXB0TG9hZGVyUmVzcG9uc2U+IHtcblxuICAgICAgICBpZiAodGhpcy5zY3JpcHRzW2lkXSkge1xuICAgICAgICAgICAgcmV0dXJuIG9mKCh7IHNjcmlwdDogaWQsIGxvYWRlZDogdHJ1ZSwgc3RhdHVzOiAnQWxyZWFkeSBMb2FkZWQnIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzY3JpcHQgPSB0aGlzLmluaXRpYWxpemVTY3JpcHQoaWQpO1xuICAgICAgICBzY3JpcHQuc3JjID0gc3JjO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRBbmRBcHBlbmRTY3JpcHQoaWQsIHNjcmlwdCk7XG4gICAgfVxuXG4gICAgcHVibGljIGxvYWRXaXRoQXV0aChpZDogc3RyaW5nLCBzcmM6IHN0cmluZyk6IE9ic2VydmFibGU8U2NyaXB0TG9hZGVyUmVzcG9uc2U+IHtcblxuICAgICAgICBpZiAodGhpcy5zY3JpcHRzW2lkXSkge1xuICAgICAgICAgICAgcmV0dXJuIG9mKCh7IHNjcmlwdDogaWQsIGxvYWRlZDogdHJ1ZSwgc3RhdHVzOiAnQWxyZWFkeSBMb2FkZWQnIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzY3JpcHQgPSB0aGlzLmluaXRpYWxpemVTY3JpcHQoaWQpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmdldFRleHQoc3JjLCBuZXcgSHR0cEhlYWRlcnMoKSwgbmV3IEh0dHBQYXJhbXMoKSkucGlwZShcbiAgICAgICAgICAgIHN3aXRjaE1hcCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICBzY3JpcHQuaW5uZXJUZXh0ID0gdGV4dDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkQW5kQXBwZW5kU2NyaXB0KGlkLCBzY3JpcHQpO1xuICAgICAgICAgICAgfSkgICAgICAgICAgICBcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdW5sb2FkU2NyaXB0KGlkOiBzdHJpbmcpIHtcblxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjcmlwdF9cIiArIGlkKT8ucmVtb3ZlKCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnNjcmlwdHNbaWRdO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZVNjcmlwdChpZDogc3RyaW5nKTogSFRNTFNjcmlwdEVsZW1lbnQge1xuXG4gICAgICAgIGxldCBzY3JpcHQgPSA8SFRNTFNjcmlwdEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzY3JpcHRfXCIgKyBpZCk7IC8vIERvbid0IHByb2xpZmVyYXRlIHNjcmlwdCB0YWdzIG9uIHJldmlzaXRzXG4gICAgICAgIGlmICghc2NyaXB0KSB7XG4gICAgICAgICAgICBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNjcmlwdC5pZCA9IFwic2NyaXB0X1wiICsgaWQ7XG4gICAgICAgIHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG5cbiAgICAgICAgcmV0dXJuIHNjcmlwdDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxvYWRBbmRBcHBlbmRTY3JpcHQoaWQ6IHN0cmluZywgc2NyaXB0OiBIVE1MU2NyaXB0RWxlbWVudCk6IE9ic2VydmFibGU8U2NyaXB0TG9hZGVyUmVzcG9uc2U+IHtcblxuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGU8U2NyaXB0TG9hZGVyUmVzcG9uc2U+KHN1YnNjcmliZXIgPT4ge1xuXG4gICAgICAgICAgICBpZiAoc2NyaXB0LnNyYykgeyAvLyBJZiB0aGUgc2NyaXB0IGhhcyBhIFVSTCBzcmMsIGNvbXBsZXRlIHRoZSBvYnNlcnZhYmxlIHdoZW4gaXQgaXMgbG9hZGVkOyBvdGhlcndpc2UsIGFzc3VtZSB0aGUgc291cmNlIGlzIGluY2x1ZGVkIGFzIGJvZHljb250ZW50IGFuZCBjb21wbGV0ZSBpbW1lZGlhdGVseVxuICAgICAgICAgICAgICAgIGlmICgoPGFueT5zY3JpcHQpLnJlYWR5U3RhdGUpIHsgIC8vIElFXG4gICAgICAgICAgICAgICAgICAgICg8YW55PnNjcmlwdCkub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCg8YW55PnNjcmlwdCkucmVhZHlTdGF0ZSA9PT0gXCJsb2FkZWRcIiB8fCAoPGFueT5zY3JpcHQpLnJlYWR5U3RhdGUgPT09IFwiY29tcGxldGVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICg8YW55PnNjcmlwdCkub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcmlwdHNbaWRdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoeyBzY3JpcHQ6IGlkLCBsb2FkZWQ6IHRydWUsIHN0YXR1czogJ0xvYWRlZCcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7ICAvLyBPdGhlcnNcbiAgICAgICAgICAgICAgICAgICAgc2NyaXB0Lm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NyaXB0c1tpZF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHsgc2NyaXB0OiBpZCwgbG9hZGVkOiB0cnVlLCBzdGF0dXM6ICdMb2FkZWQnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNjcmlwdC5vbmVycm9yID0gZXJyID0+IHN1YnNjcmliZXIuZXJyb3IoeyBzY3JpcHQ6IGlkLCBsb2FkZWQ6IGZhbHNlLCBzdGF0dXM6ICdMb2FkZWQnLCBlcnJvcjogZXJyIH0pO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JpcHRzW2lkXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHsgc2NyaXB0OiBpZCwgbG9hZGVkOiB0cnVlLCBzdGF0dXM6ICdMb2FkZWQnIH0pO1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRleHQodXJsOiBzdHJpbmcsIGhlYWRlcnM6IEh0dHBIZWFkZXJzLCBwYXJhbXM6IEh0dHBQYXJhbXMpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogJ2JvZHknLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zLFxuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG5cbn0iXX0=